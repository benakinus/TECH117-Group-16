<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heart Rate Monitor</title>

  <!-- Prism.js syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>

  <!-- Includes the stylesheet file styles.css -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Fixed Navigation Menu -->
  <nav id="menu">
    <h3>Menu</h3>
    <ul>
      <li><a href="#top">Title</a></li>
      <li><a href="#information">Project Information</a></li>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#circuit-diagram">Circuit</a></li>
      <li><a href="#environment">Environment</a></li>
      <li><a href="#bom">BoM</a></li>
      <li><a href="#prototype">Prototype</a></li>
      <li><a href="#code">Code</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      <li><a href="#references">References</a></li>
    </ul>
  </nav>


  <h1 id="top">Heart Rate Monitor</h1>

  <section id="information">
    <h2>Project Information</h2>
    <p><strong>Course:</strong> TECH 117 (Computer Engineering Technology, Fall 2025)</p>
    <p><strong>Instructor:</strong> Ph.D. Ana Rodrigues</p>
    <p><strong>Team Members:</strong></p>
    <ul>
      <li>Benjamin Akinnusi</li>
      <li>Maliek Meggoe</li>
      <li>Oghenetejiri Morgan-Oloyeh</li>
      <li>Martins Ola</li>
    </ul>
  </section>

  <section id="introduction">
    <h2>Introduction</h2>
    <p>This project uses an <strong>Arduino Uno, a KY-039 pulse sensor, an LCD display, Red and Green LEDS and a potentiometer</strong>, 
      as well to detect and display heart rate in real-time. The system processes the heart's electrical signals via
       the pulse sensor and displays them on the LCD display for easy monitoring.
    </p>
  </section>

  <section id="circuit-diagram">
    <h2>Circuit Diagram</h2>
    <p>The KY-039 sensor will measure the pulse coming from the fingertip of a user and will display the heart rate
      on a LCD display in the form of <strong>Beats Per Minute</strong>
    </p>
    <img src="KY-039.png" alt="Arduino collision warning system">
    <img src="LCD.png" alt="Arduino collision warning system">
  </section>

  <section id="environment">
    <h2>Environmental Impact Assessment</h2>
    <ul>
      <li><strong>Materials:</strong> The Arduino Uno is RoHS and WEEE compliant, limiting hazardous substances.
      </li>
      <li><strong>Energy Efficiency:</strong> The circuit draws minimal power (~50 mA at 5V), ideal for USB or
        solar power.</li>
      <li><strong>Reusability:</strong> All components are modular and reusable, reducing electronic waste.</li>
      <li><strong>Packaging & Shipping:</strong> Ordering all components from a single supplier helps minimize
        carbon footprint.</li>
    </ul>
  </section>

  <section id="bom">
    <h2>Bill of Materials (BoM)</h2>
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>Unit Price (CAD)</th>
          <th>Subtotal (CAD)</th>
          <th>Source</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Arduino Uno Rev3</td>
          <td>1</td>
          <td>$21.99</td>
          <td>$21.99</td>
          <td><a href="https://www.amazon.ca/PTSolns-ATmega328P-Microcontroller-Development-Compatible/dp/B0DT2DVP7C/ref=sr_1_2_sspa">Arduino Store</a></td>
        </tr>
        <tr>
          <td>KY-039 Pulse Sensor (Pack of 3)</td>
          <td>1</td>
          <td>$2.99</td>
          <td>$8.99</td>
          <td><a href="https://www.amazon.ca/KY-039-Finger-Heartbeat-Measurement-Arduino/dp/B07S8N69DK/ref=sr_1_1">Amazon</a></td>
        </tr>
        <tr>
          <td>16x2 LCD Arduino Display</td>
          <td>1</td>
          <td>$10.36</td>
          <td>$10.36</td>
          <td><a href="https://www.amazon.ca/Freenove-Display-Compatible-Arduino-Raspberry/dp/B0B76YGDV4/ref=sr_1_5?th=1">Amazon</a></td>
        </tr>
        <tr>
          <td>LEDs (Red, Yellow, Green)</td>
          <td>3</td>
          <td>$0.05</td>
          <td>$0.15</td>
          <td><a href="https://www.digikey.ca/en/products/detail/everlight-electronics-co-ltd/HLMPD150A/2675555">DigiKey</a></td>
        </tr>
        <tr>
          <td>220 Ω Resistors</td>
          <td>3</td>
          <td>$0.03</td>
          <td>$0.09</td>
          <td>Adafruit</td>
        </tr>
        <tr>
          <td>Breadboard</td>
          <td>1</td>
          <td>$5.00</td>
          <td>$5.00</td>
          <td><a href="https://www.amazon.ca/MMOBIEL-Solderless-Breadboards-Prototype-Circuit/dp/B0CPJP9YSN/ref=sr_1_23">Amazon</a></td>
        </tr>
        <tr>
          <td>Jumper Wires</td>
          <td>1 set</td>
          <td>$3.50</td>
          <td>$3.50</td>
          <td><a href="https://www.sparkfun.com/jumper-wires-standard-7-m-m-30-awg-30-pack.html">SparkFun</a>
          </td>
        </tr>
        <tr>
          <td>USB Cable</td>
          <td>1 </td>
          <td>$3.50</td>
          <td>$3.50</td>
          <td><a href="https://www.sparkfun.com/jumper-wires-standard-7-m-m-30-awg-30-pack.html">SparkFun</a>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3">Estimated Total</td>
          <td>$53.58</td>
          <td>—</td>
        </tr>
      </tfoot>
    </table>
  </section>

  <section id="prototype">
    <h2>Prototype</h2>
    <p>The following image shows the assembled prototype on a breadboard.</p>
    <img src="Prototype.jpg" alt="Heart Rate monitor prototype">
  </section>

  <section id="code">
    <h2>Arduino Code</h2>
    <p>The following Arduino code detects the pulse from a fingertip, converts it to BPM, and prints it on to the Serial Monitor and the LCD Display</p>

    <pre class="line-numbers">
  <button class="copy-btn" onclick="copyCode()">Copy</button>
  <code id="arduinoCode" class="language-cpp">
#define samp_siz 4
#define rise_threshold 4

 
const int rs = 12, en = 11, d4 = 5, d5 = 4, d6 = 3, d7 = 2;
 
LiquidCrystal lcd(rs, en, d4, d5, d6, d7);
// Pulse Monitor  Test Script
int sensorPin = 0;

void setup() {
    lcd.begin(16, 2);
    Serial.begin(9600);
}

void  loop ()
{
    float reads[samp_siz], sum;
    long int now, ptr;
    float  last, reader, start;
    float first, second, third, before, print_value;
    bool rising;
    int rise_count;
    int n;
    long int last_beat;

    for (int i = 0; i < samp_siz; i++)
      reads[i] = 0;
    sum = 0;
    ptr = 0;

    while(1)
    {
      // calculate an average of the  sensor
      // during a 20 ms period (this will eliminate
      // the 50  Hz noise caused by electric light
      n = 0;
      start = millis();
      reader = 0.;
      do
      {
        reader += analogRead (sensorPin);
        n++;
        now = millis();
      }
      while (now < start +  20);  
      reader /= n;  // we got an average
      
      // Add the  newest measurement to an array
      // and subtract the oldest measurement from  the array
      // to maintain a sum of last measurements
      sum -= reads[ptr];
      sum += reader;
      reads[ptr] = reader;
      last = sum / samp_siz;
      // now last holds the average of the values in the array

      // check  for a rising curve (= a heart beat)
      if (last > before)
      {
        rise_count++;
        if (!rising && rise_count > rise_threshold)
        {
          //  Ok, we have detected a rising curve, which implies a heartbeat.
          //  Record the time since last beat, keep track of the two previous
          //  times (first, second, third) to get a weighed average.
          // The rising  flag prevents us from detecting the same rise more than once.
          rising  = true;
          first = millis() - last_beat;
          last_beat = millis();

          // Calculate the weighed average of heartbeat rate
          // according  to the three last beats
          print_value = 60000. / (0.4 * first + 0.3 *  second + 0.3 * third);

          lcd.setCursor(0, 1);
          lcd.print(print_value);
          Serial.print(print_value);
          Serial.print('\n');
          
          third = second;
          second  = first;
          
        }
      }
      else
      {
        //  Ok, the curve is falling
        rising = false;
        rise_count = 0;
      }
      before = last;
      
      
      ptr++;
      ptr  %= samp_siz;

    }
}

    </code></pre>

    <script>
      function copyCode() {
        const code = document.getElementById('arduinoCode').innerText;
        navigator.clipboard.writeText(code).then(() => {
          alert('Code copied to clipboard!');
        });
      }
    </script>
  </section>



  <section id="conclusion">
    <h2>Conclusion</h2>
    <p>The system is able to detect a pulse of a fingertip and display the BPM on to the LCD display.</p>
  </section>

 <section id="references">
  <h2>References</h2>
  <p>
    The following external resources and example projects demonstrate related Arduino applications 
    using ultrasonic distance sensors, passive buzzers, and multicolour LEDs:
  </p>

  <ul>
    <li>
      Arduino Project Hub. (2018, April 1). 
      <em>From KY-039 to heart rate.</em> 
      Arduino Project Hub. 
      <a href="https://projecthub.arduino.cc/Johan_Ha/from-ky-039-to-heart-rate-8c660b" target="_blank" rel="noopener noreferrer">
        https://projecthub.arduino.cc/Johan_Ha/from-ky-039-to-heart-rate-8c660b
      </a>
    </li>

    <li>
      Phipps Electronics. (2021, March 1). 
      <em>Using the heart beat sensor KY-039 with Arduino</em> 
      Arduino Project Hub. 
      <a href="https://www.phippselectronics.com/using-the-heart-beat-sensor-ky-039-with-arduino/" target="_blank" rel="noopener noreferrer">
        https://www.phippselectronics.com/using-the-heart-beat-sensor-ky-039-with-arduino/
      </a>
    </li>

    <li>
      Last Minute Engineers.(2025, May 29). 
      <em>In-depth: Detect, Measure & Plot Heart Rate Using Pulse Sensor & Arduino..</em> 
      Last Minute Engineers. 
      <a href="https://lastminuteengineers.com/pulse-sensor-arduino-tutorial/ " target="_blank" rel="noopener noreferrer">
        https://lastminuteengineers.com/pulse-sensor-arduino-tutorial/ 
      </a>
    </li>

    <li>
      Instructables. (n.d.). 
      <em>Distance measurement using ultrasonic sensor.</em> 
      Instructables. 
      <a href="https://www.instructables.com/Arduino-Distance-Measurement-Using-Ultrasonic-Senso/" target="_blank" rel="noopener noreferrer">
        https://www.instructables.com/Arduino-Distance-Measurement-Using-Ultrasonic-Senso/
      </a>
    </li>

    <li>
      Circuit Basics. (n.d.). 
      <em>How to use an ultrasonic sensor with Arduino.</em> 
      Circuit Basics. 
      <a href="https://www.circuitbasics.com/how-to-use-an-ultrasonic-sensor-with-arduino/" target="_blank" rel="noopener noreferrer">
        https://www.circuitbasics.com/how-to-use-an-ultrasonic-sensor-with-arduino/
      </a>
    </li>

    <li>
      Last Minute Engineers. (n.d.). 
      <em>Ultrasonic sensor tutorial.</em> 
      Last Minute Engineers. 
      <a href="https://lastminuteengineers.com/ultrasonic-sensor-arduino-tutorial/" target="_blank" rel="noopener noreferrer">
        https://lastminuteengineers.com/ultrasonic-sensor-arduino-tutorial/
      </a>
    </li>
  </ul>
</section>



</body>

</html>
